<!doctype html>
<html lang="sk">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
    crossorigin="anonymous">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <title>The Run results - DXC dream team</title>
</head>


<body>

  <h1>The Run - výsledky</h1>
  <p id="demo2">demo2</p>

  <script>
    $.get("http://localhost:3000/results?teamID=29", function (response) {
      var output = "";
      output += '<table class="table">';
      output += '<thead>';
      output += '<tr>';
      output += '<th scope="col">#</th>';
      output += '<th scope="col">Bežec</th>';
      output += '<th scope="col">Štart</th>';
      output += '<th scope="col">Dĺžka</th>';
      output += '<th scope="col">Tempo</th>';
      output += '<th scope="col">Trvanie</th>';
      output += '<th scope="col">Rozdiel</th>';
      output += '</tr>';
      output += '</thead >';
      output += '<tbody>';
      for (let index = 0; index < 48; index++) {
        if ((index - 1) == response.status.lastLegDone) {
          output += '<tr style="background-color:orange">';
        } else {
          output += '<tr>';
        }
        const element = response.legs[index];
        output += '<th scope="row">' + (index + 1) + '</th>';
        output += '<td>' + element.runnerName + '</td>';
        output += '<td>' + element.startTime + '</td>';
        output += '<td>' + element.distance + '</td>';
        if (element.realDuration) {
          output += '<td>' + element.realTempo + '</td>';
          output += '<td>' + element.realDuration + '</td>';
          if (element.diff.startsWith('-') || element.diff.startsWith('0:00:00')) {
            output += '<td style="color:MediumSeaGreen">' + element.diff + '</td>';
          } else {
            output += '<td style="color:tomato">' + element.diff + '</td>';
          }
        } else {
          output += '<td>' + element.plannedTempo + '</td>';
          output += '<td>' + element.plannedDuration + '</td>';
          output += '<td>' + ' ' + '</td>';
        }
        output += '</tr>';
      }
      output += '<tr>';
      output += '<th scope="row">' + ' ' + '</th>';
      output += '<td>' + 'SPOLU' + '</td>';
      output += '<td>' + response.legs[47].endTime + '</td>';
      output += '<td>' + response.status.totalDistance + '</td>';
      output += '<td>' + response.status.tempo + '</td>';
      output += '<td>' + response.status.totalRealDuration + '</td>';
      if (response.status.totalDiff.startsWith('-') || response.status.totalDiff.startsWith('0:00:00')) {
        output += '<td style="color:MediumSeaGreen">' + response.status.totalDiff + '</td>';
      } else {
        output += '<td style="color:tomato">' + response.status.totalDiff + '</td>';
      }
      output += '</tr>';

      output += '<tbody>';
      document.getElementById("demo2").innerHTML = output;
      console.log(typeof response);
      console.log(response);
    });

  // $.get("http://localhost:3000/legs?legID=9", function (response) {
  //     document.getElementById("demo2").innerHTML = response.from + " -> " + response.to;
  // });


  // $.get("https://5ron7xepdc.execute-api.eu-central-1.amazonaws.com/prod/legs?legID=9", function (response) {
  //     document.getElementById("demo").innerHTML = response.from + " -> " + response.to;
  // });

  </script>

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
    crossorigin="anonymous"></script>

</body>

</html>